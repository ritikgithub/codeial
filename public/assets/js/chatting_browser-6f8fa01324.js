class chatBox{constructor(e,o,t){this.sender_email=o,this.chatroom=e,this.socket="production"==t?io.connect("http://3.128.184.46:5000"):io.connect("http://localhost:5000"),this.sender_email&&this.connectionHandler()}connectionHandler(){let e=this;e.socket.on("connect",(function(){console.log("Connection established between sockets")})),e.socket.emit("join_room",{sender_email:e.sender_email,chatroom:e.chatroom}),e.socket.on("user_joined",(function(e){console.log(e+" has added to chat room")})),$(`#chatbox-${e.chatroom} .input-message`).submit((function(o){o.preventDefault(),e.socket.emit("send-message",{message:$(`#chatbox-${e.chatroom} .input-message input`).val(),sender_email:e.sender_email,chatroom:e.chatroom}),$(this).find("input").val("")})),e.socket.on("receive-message",(function(o){let t=$("<li>");t.append(`<p>${o.message}</p>`),o.sender_email==e.sender_email?t.addClass("self-message"):t.addClass("other-message"),$(`#chatbox-${e.chatroom} .messages`).append(t)}))}}
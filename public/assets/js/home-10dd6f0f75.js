{let e=function(e){new Noty({theme:"relax",text:e,type:"success",timeout:1e3}).show()},t=function(e){let t=$(`<li id="post-${e._id}">\n        <p class="bradley-underline"> ${e.user.name}</p>\n        <p class="fontsize-1point2"> ${e.content}</p>\n        \n        <a class="delete-post-button" href="posts/delete?postId=${e._id}"><i class="far fa-trash-alt"></i></a>\n       \n        <div class="post-likes">\n        <a href="/posts/add-delete-like?postId=${e._id}" class="add-delete-like-button"><i class="far fa-thumbs-up"></i></a>\n        <span class="post-likes-no">0</span>\n        </div>\n\n        \n        <form id="comment" action="/comments/create" method="POST">\n            <textarea name="comment" id="comment-id" cols="30" rows="1"></textarea>\n            <input type="hidden" name="postId" value=${e._id} >\n            <button type="submit">Comment</button>\n        </form>\n\n       \n        <div class="show-comments-container">\n          <h4>Comments</h4>\n            <ul>\n               \n            </ul>\n        </div>\n    </li>`);return e.img_path&&$(`<img src="${e.img_path}" width="600px"><br><br>`).insertAfter($(t.find("a")[0])),t};(function(){$("#post-submit-form").on("submit",(function(o){o.preventDefault();var s=new FormData($(this)[0]);$.ajax({type:"post",url:"/posts/create",data:s,contentType:!1,processData:!1,success:function(o){let s=t(o.data.post);$("#posts").prepend(s),e(o.message),n($(s).find(".delete-post-button")),a(s),i(s)},error:function(e){console.log("Error",e)}})}))})();let n=function(t){t.click((function(n){n.preventDefault(),console.log(t.attr("href")),$.ajax({type:"get",url:t.attr("href"),success:function(t){$("#post-"+t.data.postId).remove(),e(t.message)},error:function(e){console.log("Error",e)}})}))},o=function(e){return $(`<li id="comment-${e._id}">\n        <p class="bradley-underline fontsize1point0">  ${e.user.name}</p>\n        <p> ${e.content}</p>\n        <a class="comment-delete-button" href="/comments/delete/${e._id}"><i class="far fa-trash-alt"></i></a>\n        <div class="comment-likes">\n         <a href="/comments/add-delete-like?commentId=${e._id}" class="add-delete-like-button-comment"><i class="far fa-thumbs-up"></i></a> \n        <span class="comment-likes-no">0</span>\n       \n        </div>\n        \n    </li>`)},s=function(t){t.click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(this).attr("href"),success:function(t){$("#comment-"+t.data.commentId).remove(),e(t.message)},error:function(e){console.log("kjb",e)}})}))},i=function(t){$(t).find("form").submit((function(n){n.preventDefault(),$.ajax({type:"post",url:"/comments/create",data:$(this).serialize(),success:function(n){let i=o(n.data.comment);$(t).find(".show-comments-container > ul").prepend(i),s(i.find(".comment-delete-button")),l(i),e(n.message)},error:function(e){console.log(e.responseText)}})}))},a=function(e){e.find(".add-delete-like-button").click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(this).attr("href"),success:function(t){console.log(e.find(".post-likes-no")),e.find(".post-likes-no").text(t.data.post.likes.length),e.find(".add-delete-like-button i").toggleClass("color-blue")},error:function(){console.log("Error ",err)}})}))},l=function(e){e.find(".add-delete-like-button-comment").click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(this).attr("href"),success:function(t){e.find(".comment-likes-no").text(t.data.comment.likes.length),e.find(".add-delete-like-button-comment i").toggleClass("color-blue")},error:function(){console.log("Error ",err)}})}))};for(let e of $("#posts").children()){n($(e).find(".delete-post-button")),i($(e)),a($(e));for(let t of $(e).find(".show-comments-container > ul").children())s($(t).find(".comment-delete-button")),l($(t))}}